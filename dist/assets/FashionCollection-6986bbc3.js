import{u as S,C as z,g as k,c as v,d as E,j as n,a,e as I}from"./index-0dca03f5.js";import{r as c}from"./motion-4432cab6.js";import{C as O,a as T}from"./Cart-17719f0e.js";const D="/assets/UNDEFINED-Tee-66820e5b.png",p={"UNDEFINED-Tee.png":D};function j(){const i=S(),{addToCart:h}=c.useContext(z),[u,r]=c.useState(!1),[m,C]=c.useState([]),[l,N]=c.useState({}),g=["S","M","L"];c.useEffect(()=>{const e=k(I);v(E(e,"Collection")).then(s=>{const o=s.docs.map(d=>{const t=d.data();return{id:d.id,name:t.name,description:t.description,price:t.price,priceId:t.priceId,sizes:t.sizes??(t.size?[t.size]:[]),image:p[t.image]||p["UNDEFINED-Tee.png"],stock:t.stock??0}});C(o)}).catch(console.error)},[]);const b=(e,s)=>{N(o=>({...o,[e]:s}))},f=e=>{const s=l[e.id];if(!s){alert("Please select a size before adding to cart.");return}h({...e,size:s})};return n("div",{className:"collection-page",children:[a("button",{className:"back-btn",onClick:()=>i(-1),children:"â† Back"}),a(O,{isOpen:u,onClose:()=>r(!1)}),a("header",{className:"header",children:a("button",{className:"cart-btn",onClick:()=>r(!0),"aria-label":"Open cart",children:a("img",{src:T,alt:"Cart",className:"cart-icon"})})}),a("h2",{className:"Tittle",children:"Collection"}),a("div",{className:"grid",children:m.map(e=>n("div",{className:"item",children:[a("img",{src:e.image,alt:e.name,loading:"lazy",onClick:()=>i(`/product/${e.id}`)}),a("p",{className:"name",children:e.name}),a("p",{className:"description",children:e.description}),n("p",{className:"price",children:["RM",e.price]}),e.sizes.length>0&&a("div",{className:"size-dropdown-wrapper",children:n("select",{className:"size-dropdown",value:l[e.id]||"",onChange:s=>b(e.id,s.target.value),children:[a("option",{value:"",disabled:!0,children:"Size"}),g.map(s=>a("option",{value:s,children:s},s))]})}),a("button",{className:"add-cart-btn",onClick:()=>f(e),disabled:e.stock===0,children:e.stock===0?"Out of Stock":"Add to Cart"})]},e.id))})]})}export{j as default};
